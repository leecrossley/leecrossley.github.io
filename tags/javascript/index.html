<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>javascript | iLee | developer blog</title>
  <meta name="author" content="Lee Crossley">
  <meta name="description" content="I write code that sounds awesome and music that's bug free">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta property="og:site_name" content="iLee"/>
  <meta property="og:image" content="http://www.gravatar.com/avatar/57e15d6acbd5f46c300a83b5e61db1de?s=200"/>
  <link rel="alternate" href="/atom.xml" title="iLee" type="application/atom+xml">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-42989646-1', 'ilee.co.uk');
    ga('send', 'pageview');
  </script>

</head>


<body>
  <div id="content" class="inner">
    <div id="sidebar" class="alignleft"><header class="logo">
  <h1>
    <a href="/">iLee</a>
    <span>I write code that sounds awesome and music that's bug free</span>
  </h1>
</header>

<ul class="social">
  <li class="facebook">
    <a href="https://www.facebook.com/lee.crossley" target="_blank" class="icon"><i class="icon-facebook"></i></a>
  </li>
  <li class="twitter">
    <a href="https://twitter.com/lee_crossley" target="_blank" class="icon"><i class="icon-twitter"></i></a>
  </li>
  <li class="github">
    <a href="https://github.com/leecrossley" target="_blank" class="icon"><i class="icon-github"></i></a>
  </li>
  <li class="google-plus">
    <a href="https://plus.google.com/100605644656941447412" target="_blank" class="icon"><i class="icon-google-plus"></i></a>
  </li>
  <li class="linkedin">
    <a href="http://uk.linkedin.com/in/leecrossley/" target="_blank" class="icon"><i class="icon-linkedin"></i></a>
  </li>
</ul>


  <div class="widget tag">
<ul class="entry">
  
    <li><a href="/">Home</a></li>
  
    <li><a href="/about-me">About Me</a></li>
  
    <li><a href="/archives">Archives</a></li>
  
</ul>
</div>

  
<div class="widget tag">
  <h3 class="title">Recent Posts</h3>
  <ul class="entry">
    
      <li>
        <a href="/maximise-twitter-engagement/">Maximise Your Twitter Engagement</a>
      </li>
    
      <li>
        <a href="/road-to-hack-manchester/">The Road to Hack Manchester</a>
      </li>
    
      <li>
        <a href="/iphone-fingerprint-recognition-for-developers/">Fingerprint Recognition for Developers</a>
      </li>
    
      <li>
        <a href="/multiple-function-composition/">Multiple Function Composition</a>
      </li>
    
      <li>
        <a href="/functional-javascript-library/">A Functional Javascript Library</a>
      </li>
    
      <li>
        <a href="/javascript-arithmetic-number-rounding/">JavaScript Number Rounding</a>
      </li>
    
      <li>
        <a href="/use-google-pagespeed-on-your-site/">Use Google PageSpeed on Your Site</a>
      </li>
    
      <li>
        <a href="/do-we-need-designers-for-the-web/">Do We Need Designers for the Web?</a>
      </li>
    
      <li>
        <a href="/static-site-generators/">Static Site Generators</a>
      </li>
    
  </ul>
</div>


  

  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/app/">app</a><small>2</small></li>
  
    <li><a href="/tags/design/">design</a><small>1</small></li>
  
    <li><a href="/tags/hack/">hack</a><small>1</small></li>
  
    <li><a href="/tags/iphone/">iphone</a><small>1</small></li>
  
    <li><a href="/tags/javascript/">javascript</a><small>4</small></li>
  
    <li><a href="/tags/web/">web</a><small>5</small></li>
  
  </ul>
</div>

</div>
    <div id="main-col" class="alignright"><div id="wrapper">
<h2 class="archive-title tag">javascript</h2>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      <div class="icon"></div>
      
        <time datetime="2013-08-15T13:55:34.000Z">15th Aug 2013</time>
      
      
  
    <h1 class="title"><a href="/maximise-twitter-engagement/">Maximise Your Twitter Engagement</a></h1>
  

    </header>
    <div class="entry">
      
        <h2>Get more twitter retweets and favourites</h2>
<p><a href="http://www.tweetthen.com/">TweetThen</a> allows you to calculate the optimal day and time for you to tweet, based on retweets and favourites your tweets have had in the past.</p>
<h2>How does it work?</h2>
<p>Visit <a href="http://www.tweetthen.com/">TweetThen</a> and authorise the website to access your twitter account. <strong>That&#39;s it!</strong> You&#39;ll automatically be displayed a punch card style chart showing you the days and times when your past tweets were favourited or retweeted (note that it uses the time of your original tweet).</p>
<h2>Why should I bother?</h2>
<p>Whether you&#39;re an individual or a company, you tweet because you want people to read it and engage with it. If you have an important tweet, you want to get the maximum possible exposure.</p>
<p>Twitter is global and users/followers are from various timezones, so your optimal post time may not be what you think. Also, everyones followers are different, TweetThen tailors your date and times directly to your twitter account.</p>
<h2>Is this a unique idea?</h2>
<p>I&#39;ve found a couple of others doing similar things. One service is free but doesn&#39;t work - at all, and the other costs $4.99 per request! <strong>TweetThen is currently 100% free.</strong></p>
<h2>Who wrote it?</h2>
<p>If you&#39;ve not guessed by now, it&#39;s a little pet project I started yesterday. It&#39;s built using <a href="http://nodejs.org/">node.js</a> and uses my <a href="https://github.com/leecrossley/functional-js">functional.js library</a>. I wanted to explore some real world usages of functional.js and also get to grips with the twitter v1.1 API.</p>
<h2>Alpha?</h2>
<p>It&#39;s is a first iteration prototype and therefore may not perform as intended and issues are possible. I hope to have a beta release soon with an improved assessment algorithm. I&#39;m a strong believer in always developing a Minimum Viable Product (MVP) initially, for fast and quantitative market testing. </p>
<p>If you have any suggestions or improvements, just drop me a tweet but make sure you use TweetThen first, so you know when&#39;s best to do it :)</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      <div class="icon"></div>
      
        <time datetime="2013-08-11T10:31:55.000Z">11th Aug 2013</time>
      
      
  
    <h1 class="title"><a href="/multiple-function-composition/">Multiple Function Composition</a></h1>
  

    </header>
    <div class="entry">
      
        <h2>&quot;Function Composition&quot; sounds complicated, what is it?</h2>
<p>It&#39;s actually simple to explain and hopefully understand. (Multiple) function composition is the generation of a <a href="http://en.wikipedia.org/wiki/Higher-order_function">high-order function</a> by combining simpler functions. It&#39;s probably easier explained using an example.</p>
<h3>Basic example using <a href="https://github.com/leecrossley/functional-js">functional.js</a> to combine two functions</h3>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span> <span class="params">(a)</span> {</span>
    <span class="keyword">return</span> <span class="string">"hello "</span> + a;
};
<span class="keyword">var</span> g = <span class="function"><span class="keyword">function</span> <span class="params">(a)</span> {</span>
    <span class="keyword">return</span> a + <span class="number">1</span>;
};
<span class="keyword">var</span> composed = λ.compose(f, g);

expect(composed(<span class="number">1</span>)).toEqual(<span class="string">"hello 2"</span>);
</pre></td></tr></table></figure>

<p>As you can see, the output from the right-most function is passed as the argument to the next function on the left, you&#39;re then returned &quot;hello 2&quot; as a single result. Thanks to <a href="https://twitter.com/ryansroberts">@ryansroberts</a> for this one.</p>
<h3>Example using <a href="https://github.com/leecrossley/functional-js">functional.js</a> to combine three functions</h3>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="code"><pre><span class="keyword">var</span> e = <span class="function"><span class="keyword">function</span> <span class="params">(a)</span> {</span>
    <span class="keyword">return</span> <span class="string">"hello "</span> + a;
};
<span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span> <span class="params">(a)</span> {</span>
    <span class="keyword">return</span> a + <span class="number">1</span>;
};
<span class="keyword">var</span> g = <span class="function"><span class="keyword">function</span> <span class="params">(a)</span> {</span>
    <span class="keyword">return</span> a * <span class="number">100</span>;
};
<span class="keyword">var</span> composed = λ.compose(e, f, g);

expect(composed(<span class="number">2</span>)).toEqual(<span class="string">"hello 201"</span>);
</pre></td></tr></table></figure>

<p>This example illustrates the combining of multiple functions, passing the output from function &quot;g&quot; as a parameter to function &quot;f&quot;, then passing the output from function &quot;f&quot; as a parameter to function &quot;e&quot;. This leaves you with a single returned result, in this case &quot;hello 201&quot;.</p>
<h2>Ah ha! This is just inheritance for JavaScript</h2>
<p>Haha, no :) it&#39;s not a function <em>inheriting</em> properties from another function, it&#39;s a function <em>composed</em> of other functions. I suggest you look up <a href="http://javascript.crockford.com/prototypal.html">prototypal inheritance</a>. Sometimes it&#39;s ok to link to Crockford.</p>
<h2>What&#39;s the benefit?</h2>
<p>Other than making you look clever, composing functions improves code maintainability and function reuse. I believe that by using high-order functions and point-free programming, it makes your JavaScript much easier to read too. It&#39;s the future, things move on... you&#39;re not still using VB6 are you (can safely assume that if you&#39;re reading this).</p>
<h2>functional.js (λ)</h2>
<p>It&#39;s coming on, and expect more function-level programming support soon. Don&#39;t be shy to contribute and note that I&#39;m currently using 4 soft spaces for tabs, don&#39;t make me go all Crockford on you.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      <div class="icon"></div>
      
        <time datetime="2013-08-10T14:38:54.000Z">10th Aug 2013</time>
      
      
  
    <h1 class="title"><a href="/functional-javascript-library/">A Functional Javascript Library</a></h1>
  

    </header>
    <div class="entry">
      
        <h2>functional.js (λ)</h2>
<p>functional.js is (go on, guess) a functional JavaScript library I&#39;m writing. It facilitates <a href="http://en.wikipedia.org/wiki/Currying">currying</a> and <a href="http://en.wikipedia.org/wiki/Tacit_programming">point-free / tacit</a> programming in JavaScript.</p>
<p>The library already has support for some <a href="http://en.wikipedia.org/wiki/Higher-order_programming">higher-order programming</a>, such as iterating, mapping and reducing (some examples pulled from my <a href="http://pivotal.github.io/jasmine/">jasmine</a> tests are below).</p>
<p>I&#39;m working to add more functions and helpers to support <a href="http://en.wikipedia.org/wiki/Function-level_programming">functional-level programming</a> but it&#39;s pretty tough ;). <a href="https://github.com/leecrossley/functional-js">Contributions</a> are more than welcome if you fancy some brain pain.</p>
<h3>Basic λ.curry example</h3>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="keyword">var</span> concatenate = λ.curry(<span class="keyword">function</span>(word1, word2) {
    <span class="keyword">return</span> word1 + <span class="string">" "</span> + word2;
});

<span class="keyword">var</span> concatenateHello = concatenate(<span class="string">"Hello"</span>);
<span class="keyword">var</span> result = concatenateHello(<span class="string">"World"</span>);

expect(result).toEqual(<span class="string">"Hello World"</span>);
</pre></td></tr></table></figure>

<h3>Another λ.curry example</h3>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="code"><pre><span class="keyword">var</span> add = λ.curry(<span class="keyword">function</span>(arg1, arg2, arg3) {
    <span class="keyword">return</span> arg1 + arg2 + arg3;
}); 

<span class="keyword">var</span> add3 = add(<span class="number">3</span>),
    add5 = add3(<span class="number">2</span>);

expect(add(<span class="number">3</span>)(<span class="number">2</span>)(<span class="number">1</span>)).toEqual(<span class="number">6</span>);
expect(add3(<span class="number">2</span>, <span class="number">1</span>)).toEqual(<span class="number">6</span>);
expect(add3(<span class="number">2</span>)(<span class="number">1</span>)).toEqual(<span class="number">6</span>);
expect(add5(<span class="number">1</span>)).toEqual(<span class="number">6</span>);
</pre></td></tr></table></figure>

<h3>Curried λ.each example</h3>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="code"><pre><span class="keyword">var</span> result = [],
    items = [<span class="string">"f"</span>, <span class="string">"u"</span>, <span class="string">"n"</span>, <span class="string">"c"</span>];

<span class="keyword">var</span> addTo = <span class="function"><span class="keyword">function</span> <span class="params">(item)</span> {</span>
    <span class="keyword">return</span> result.push(item);
};

<span class="keyword">var</span> addToResult = λ.each(addTo);
expect(<span class="keyword">typeof</span> (addToResult)).toEqual(<span class="string">"function"</span>);

addToResult(items);
expect(result).toEqual([<span class="string">"f"</span>, <span class="string">"u"</span>, <span class="string">"n"</span>, <span class="string">"c"</span>]);
</pre></td></tr></table></figure>

<h3>Curried λ.map example</h3>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="code"><pre><span class="keyword">var</span> items = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];

<span class="keyword">var</span> doubleUp = <span class="function"><span class="keyword">function</span> <span class="params">(number)</span> {</span>
    <span class="keyword">return</span> number * <span class="number">2</span>;
};

<span class="keyword">var</span> doubleMap = λ.map(doubleUp);
expect(<span class="keyword">typeof</span> (doubleMap)).toEqual(<span class="string">"function"</span>);

<span class="keyword">var</span> result = doubleMap(items);
expect(result).toEqual([<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>]);
</pre></td></tr></table></figure>

<h3>Curried λ.reduce example</h3>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="code"><pre><span class="keyword">var</span> items = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];

<span class="keyword">var</span> multiply = <span class="function"><span class="keyword">function</span> <span class="params">(arg1, arg2)</span> {</span>
    <span class="keyword">return</span> arg1 * arg2;
};

<span class="keyword">var</span> multiplyReduceFrom1 = λ.reduce(multiply, <span class="number">1</span>);
expect(<span class="keyword">typeof</span> (multiplyReduceFrom1)).toEqual(<span class="string">"function"</span>);

<span class="keyword">var</span> result = multiplyReduceFrom1(items);
expect(result).toEqual(<span class="number">6</span>);
</pre></td></tr></table></figure>

<h2>Why?</h2>
<p>I like <del>torture</del> to push myself as a developer.</p>
<h2>Great, but, erm, why?</h2>
<p>By extending functions into chains of functions with fewer arguments (currying), you can fix earlier known values and return a function that only accepts future values. This avoids repetition, a good programming practice, and will assist my high-level function refinement.</p>
<p>Libraries like <a href="http://underscorejs.org/">underscore</a> can&#39;t be curried in a regular fashion, as the items come before the iterator (e.g. (items, iterator) not (iterator, items)). There&#39;s also no support for functional-level programming. The idea is that functional.js (λ) will be <em>really</em> lightweight and can  be used as an underscore replacement once it&#39;s been developed further. It also has no dependencies.</p>
<h2>Where can I get it?</h2>
<ul>
<li>$ git clone git@github.com:leecrossley/functional-js.git</li>
<li>$ npm install functional.js</li>
<li><a href="http://bit.ly/funcmin">functional.min.js</a></li>
</ul>
<h2>I have issues</h2>
<p>As long as they&#39;re related, you can report them on <a href="https://github.com/leecrossley/functional-js/issues">github</a>.</p>
<h2>Where&#39;s the λ key?</h2>
<p>You&#39;re probably reading the wrong blog post :)</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      <div class="icon"></div>
      
        <time datetime="2013-08-09T06:26:20.000Z">9th Aug 2013</time>
      
      
  
    <h1 class="title"><a href="/javascript-arithmetic-number-rounding/">JavaScript Number Rounding</a></h1>
  

    </header>
    <div class="entry">
      
        <h2>Numbers don&#39;t add up!</h2>
<p><strong>0.1 + 0.2 = 0.30000000000000004</strong></p>
<p>Sometimes numbers in JavaScript (and other languages) simply don&#39;t appear to add up. <a href="http://codepen.io/leecrossley/pen/DBJcE">Don&#39;t believe me?</a>.</p>
<figure class="highlight lang-javascript"><figcaption><span>0.1 + 0.2 = 0.30000000000000004 </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="keyword">var</span> x = <span class="number">0.1</span>,
    y = <span class="number">0.2</span>;
 
<span class="keyword">var</span> result = x + y;
 
console.log(result);
</pre></td></tr></table></figure>


<p>I discovered this in the early days of programming when building a JavaScript calculator, which fortunately is now nowhere to be seen :)</p>
<h2>Floating point numbers</h2>
<p>JavaScript uses <a href="http://en.wikipedia.org/wiki/Floating_point">Floating Point Numbers</a>, which don&#39;t cater for an accurate representations of a decimal. This means that as soon as the variable is interpreted at runtime, a rounding issue is introduced. Computers are faster and more efficient at dealing with computations on binary numbers, which produces the issue with the 17th decimal place.</p>
<h2>How to fix it</h2>
<p><a href="http://codepen.io/leecrossley/pen/hKmEa">Here&#39;s an example</a> of how I eliminate the rounding issues.</p>
<figure class="highlight lang-javascript"><figcaption><span>0.1 + 0.2 = 0.3 </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="code"><pre><span class="keyword">var</span> x = <span class="number">0.1</span>,
    y = <span class="number">0.2</span>;
 
<span class="keyword">var</span> multiplier = <span class="function"><span class="keyword">function</span> <span class="params">(dec)</span> {</span>
  <span class="keyword">var</span> str = dec.toString(),
      match = <span class="regexp">/(?:\.(\d+))?(?:[eE]([+\-]?\d+))?$/</span>.exec(str);
  <span class="keyword">return</span> Math.max(<span class="number">0</span>, (match[<span class="number">1</span>] == <span class="string">'0'</span> ? <span class="number">0</span> : (match[<span class="number">1</span>] || <span class="string">''</span>).length) - (match[<span class="number">2</span>] || <span class="number">0</span>)) * <span class="number">10</span>;
};
 
<span class="keyword">var</span> highestMultiplier = Math.max(multiplier(x), multiplier(y));
 
<span class="keyword">var</span> result = ((x * highestMultiplier) + (y * highestMultiplier)) / highestMultiplier;
 
console.log(result);
</pre></td></tr></table></figure>


<p>Essentially, I&#39;m calculating the smallest number, which if multiplied by either number I&#39;m adding together individually, would result in an integer. This is achieved by evaluating the number with the most numbers after the decimal point and what that value is. Once I have the multiplier, I use it on both the numbers I&#39;m adding together, then do the addition, then divide by the multiplier to return the numbers back to their original decimal state.</p>
<p>By performing the addition on integers, no rounding issues occur.</p>
<h2>Libraries</h2>
<p>If you&#39;re needing precision with lots of complex calculations, there are JavaScript libraries specifically for this (although some are horrible Java ports). <a href="https://github.com/MikeMcl/bignumber.js/">bignumber.js</a> looks OK and I remember using <a href="http://www.leemon.com/crypto/BigInt.js">bigint.js</a> with <a href="https://twitter.com/danielcassidy">@danielcassidy</a> and <a href="https://twitter.com/anttears">@anttears</a> back in the day.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  

  
</div></div>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2013 Lee Crossley
  
</div>
<div class="clearfix"></div></footer>
  
<script type="text/javascript">
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//ilee.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>


</body>
</html>